/**
 * Multi-language translations for Đàn Tranh Tuner
 */

const translations = {
    en: {
        // Header
        'app-title': 'Đàn Tranh Tuner',
        'app-subtitle': 'Vietnamese Zither Tuner with Microtonal Monitoring',

        // Controls
        'label-strings': 'Strings:',
        'label-tuning': 'Tuning:',
        'label-start': 'Start:',
        'label-a4': 'A4:',
        'btn-generate': 'Generate',
        'btn-start-listening': 'Start Listening',
        'btn-stop-listening': 'Stop Listening',
        'btn-erase': 'Erase',
        'btn-stop-sound': 'Stop Sound',

        // Tuning Presets
        'preset-standard': 'Standard Presets',
        'preset-vietnamese': 'Vietnamese Scales (Dây Đàn Tranh)',
        'preset-chinese': 'Chinese Pentatonic (五声音阶)',
        'preset-japanese': 'Japanese Pentatonic (五音音階)',
        'preset-other': 'Other Pentatonic',
        'preset-hexatonic': 'Hexatonic (6 notes)',
        'preset-heptatonic': 'Heptatonic (7 notes / Modes)',
        'preset-custom': 'Custom',

        // Footer
        'footer-copyright': '© 2025 Manhattan Academy of Music and Language. All Rights Reserved.',
        'footer-credits': 'Created by Phan Gia Anh Thư | Contributors: Ngô Thanh Nhàn and Đàn Tranh students'
    },

    vi: {
        // Header
        'app-title': 'Máy Chỉnh Dây Đàn Tranh',
        'app-subtitle': 'Chỉnh Dây Đàn Tranh Việt Nam với Theo Dõi Vi Âm',

        // Controls
        'label-strings': 'Số dây:',
        'label-tuning': 'Cung:',
        'label-start': 'Bắt đầu:',
        'label-a4': 'La 4:',
        'btn-generate': 'Tạo',
        'btn-start-listening': 'Bắt Đầu Nghe',
        'btn-stop-listening': 'Dừng Nghe',
        'btn-erase': 'Xóa',
        'btn-stop-sound': 'Dừng Âm Thanh',

        // Tuning Presets
        'preset-standard': 'Cung Chuẩn',
        'preset-vietnamese': 'Âm Giai Việt Nam (Dây Đàn Tranh)',
        'preset-chinese': 'Ngũ Cung Trung Quốc (五声音阶)',
        'preset-japanese': 'Ngũ Âm Nhật Bản (五音音階)',
        'preset-other': 'Ngũ Cung Khác',
        'preset-hexatonic': 'Lục Âm (6 nốt)',
        'preset-heptatonic': 'Thất Âm (7 nốt / Modes)',
        'preset-custom': 'Tự Chọn',

        // Footer
        'footer-copyright': '© 2025 Học Viện Âm Nhạc và Ngôn Ngữ Manhattan. Bảo lưu mọi quyền.',
        'footer-credits': 'Tác giả: Phan Gia Anh Thư | Cộng tác viên: Ngô Thanh Nhàn và học sinh Đàn Tranh'
    },

    zh: {
        // Header
        'app-title': '筝调音器',
        'app-subtitle': '越南筝调音器与微音监测',

        // Controls
        'label-strings': '弦数:',
        'label-tuning': '调音:',
        'label-start': '起音:',
        'label-a4': 'A4:',
        'btn-generate': '生成',
        'btn-start-listening': '开始监听',
        'btn-stop-listening': '停止监听',
        'btn-erase': '清除',
        'btn-stop-sound': '停止声音',

        // Tuning Presets
        'preset-standard': '标准预设',
        'preset-vietnamese': '越南音阶',
        'preset-chinese': '中国五声音阶',
        'preset-japanese': '日本五音音阶',
        'preset-other': '其他五声音阶',
        'preset-hexatonic': '六声音阶',
        'preset-heptatonic': '七声音阶/调式',
        'preset-custom': '自定义',

        // Footer
        'footer-copyright': '© 2025 曼哈顿音乐语言学院。保留所有权利。',
        'footer-credits': '作者：Phan Gia Anh Thư | 贡献者：Ngô Thanh Nhàn 和筝学生'
    },

    es: {
        // Header
        'app-title': 'Afinador de Đàn Tranh',
        'app-subtitle': 'Afinador de Cítara Vietnamita con Monitoreo Microtonal',

        // Controls
        'label-strings': 'Cuerdas:',
        'label-tuning': 'Afinación:',
        'label-start': 'Inicio:',
        'label-a4': 'LA4:',
        'btn-generate': 'Generar',
        'btn-start-listening': 'Comenzar a Escuchar',
        'btn-stop-listening': 'Dejar de Escuchar',
        'btn-erase': 'Borrar',
        'btn-stop-sound': 'Detener Sonido',

        // Tuning Presets
        'preset-standard': 'Preajustes Estándar',
        'preset-vietnamese': 'Escalas Vietnamitas',
        'preset-chinese': 'Pentatónica China',
        'preset-japanese': 'Pentatónica Japonesa',
        'preset-other': 'Otras Pentatónicas',
        'preset-hexatonic': 'Hexatónica (6 notas)',
        'preset-heptatonic': 'Heptatónica (7 notas / Modos)',
        'preset-custom': 'Personalizada',

        // Footer
        'footer-copyright': '© 2025 Academia de Música y Lenguaje de Manhattan. Todos los derechos reservados.',
        'footer-credits': 'Creado por Phan Gia Anh Thư | Colaboradores: Ngô Thanh Nhàn y estudiantes de Đàn Tranh'
    },

    fr: {
        // Header
        'app-title': 'Accordeur de Đàn Tranh',
        'app-subtitle': 'Accordeur de Cithare Vietnamienne avec Surveillance Microtonale',

        // Controls
        'label-strings': 'Cordes:',
        'label-tuning': 'Accordage:',
        'label-start': 'Début:',
        'label-a4': 'LA4:',
        'btn-generate': 'Générer',
        'btn-start-listening': 'Commencer à Écouter',
        'btn-stop-listening': 'Arrêter d\'Écouter',
        'btn-erase': 'Effacer',
        'btn-stop-sound': 'Arrêter le Son',

        // Tuning Presets
        'preset-standard': 'Préréglages Standard',
        'preset-vietnamese': 'Gammes Vietnamiennes',
        'preset-chinese': 'Pentatonique Chinoise',
        'preset-japanese': 'Pentatonique Japonaise',
        'preset-other': 'Autres Pentatoniques',
        'preset-hexatonic': 'Hexatonique (6 notes)',
        'preset-heptatonic': 'Heptatonique (7 notes / Modes)',
        'preset-custom': 'Personnalisée',

        // Footer
        'footer-copyright': '© 2025 Académie de Musique et de Langue de Manhattan. Tous droits réservés.',
        'footer-credits': 'Créé par Phan Gia Anh Thư | Contributeurs: Ngô Thanh Nhàn et étudiants de Đàn Tranh'
    },

    ja: {
        // Header
        'app-title': 'ダンチャインチューナー',
        'app-subtitle': 'ベトナム箏調律器とマイクロトーン監視',

        // Controls
        'label-strings': '弦数:',
        'label-tuning': '調律:',
        'label-start': '開始音:',
        'label-a4': 'A4:',
        'btn-generate': '生成',
        'btn-start-listening': '聴き始める',
        'btn-stop-listening': '聴くのを止める',
        'btn-erase': '消去',
        'btn-stop-sound': '音を止める',

        // Tuning Presets
        'preset-standard': '標準プリセット',
        'preset-vietnamese': 'ベトナム音階',
        'preset-chinese': '中国五音音階',
        'preset-japanese': '日本五音音階',
        'preset-other': 'その他五音音階',
        'preset-hexatonic': '六音音階',
        'preset-heptatonic': '七音音階/モード',
        'preset-custom': 'カスタム',

        // Footer
        'footer-copyright': '© 2025 マンハッタン音楽言語アカデミー。無断転載禁止。',
        'footer-credits': '作成者：Phan Gia Anh Thư | 協力者：Ngô Thanh Nhàn とダンチャイン学生'
    },

    ko: {
        // Header
        'app-title': '단짜인 튜너',
        'app-subtitle': '베트남 쟁 조율기 및 미분음 모니터링',

        // Controls
        'label-strings': '현 수:',
        'label-tuning': '조율:',
        'label-start': '시작음:',
        'label-a4': 'A4:',
        'btn-generate': '생성',
        'btn-start-listening': '듣기 시작',
        'btn-stop-listening': '듣기 중지',
        'btn-erase': '지우기',
        'btn-stop-sound': '소리 중지',

        // Tuning Presets
        'preset-standard': '표준 프리셋',
        'preset-vietnamese': '베트남 음계',
        'preset-chinese': '중국 오음 음계',
        'preset-japanese': '일본 오음 음계',
        'preset-other': '기타 오음 음계',
        'preset-hexatonic': '육음 음계 (6음)',
        'preset-heptatonic': '칠음 음계 (7음 / 모드)',
        'preset-custom': '사용자 정의',

        // Footer
        'footer-copyright': '© 2025 맨해튼 음악 언어 아카데미. 모든 권리 보유.',
        'footer-credits': '제작: Phan Gia Anh Thư | 기여자: Ngô Thanh Nhàn 및 단짜인 학생들'
    }
};

// Language switcher functionality
class LanguageSwitcher {
    constructor() {
        this.currentLang = localStorage.getItem('language') || 'en';
        this.init();
    }

    init() {
        // Set initial language
        this.setLanguage(this.currentLang);

        // Add event listeners to language buttons
        document.querySelectorAll('.lang-btn').forEach(btn => {
            btn.addEventListener('click', (e) => {
                const lang = e.target.dataset.lang;
                this.setLanguage(lang);
            });
        });
    }

    setLanguage(lang) {
        if (!translations[lang]) {
            console.warn(`Language '${lang}' not found, defaulting to English`);
            lang = 'en';
        }

        this.currentLang = lang;
        localStorage.setItem('language', lang);

        // Update active button
        document.querySelectorAll('.lang-btn').forEach(btn => {
            btn.classList.toggle('active', btn.dataset.lang === lang);
        });

        // Update all translatable elements
        this.updateTranslations();
    }

    updateTranslations() {
        const langData = translations[this.currentLang];

        // Update elements with data-i18n attribute
        document.querySelectorAll('[data-i18n]').forEach(element => {
            const key = element.dataset.i18n;
            if (langData[key]) {
                // Special handling for app title to preserve version
                if (key === 'app-title') {
                    element.innerHTML = `${langData[key]} <span style="font-size: 0.5em; opacity: 0.7;">v1.1.0</span>`;
                } else {
                    element.textContent = langData[key];
                }
            }
        });

        console.log(`Language switched to: ${this.currentLang}`);
    }

    t(key) {
        return translations[this.currentLang][key] || key;
    }
}

// Initialize language switcher when DOM is ready
document.addEventListener('DOMContentLoaded', () => {
    window.languageSwitcher = new LanguageSwitcher();
});
